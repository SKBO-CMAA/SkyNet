django 
aero environment

üß≠ PLAN MAESTRO (resumen)

Preparar servidor

Instalar PostgreSQL + PostGIS

Crear usuario seguro

Instalar Django + entorno virtual

Configurar Gunicorn

Configurar Nginx

Configurar firewall

Configurar dominio

Instalar SSL

Backups autom√°ticos

Lo haremos en bloques verificables.

üöÄ FASE 1 ‚Äî Preparar servidor correctamente
1Ô∏è‚É£ Actualizar sistema
sudo apt update && sudo apt upgrade -y
sudo reboot

Con√©ctate nuevamente.

2Ô∏è‚É£ Crear usuario para el proyecto (NO usar root)
sudo adduser django
sudo usermod -aG sudo django

Cerrar sesi√≥n y entrar como:

ssh django@IP_PUBLICA
3Ô∏è‚É£ Instalar paquetes base
sudo apt install python3-pip python3-venv nginx git build-essential ufw -y
üîê FASE 2 ‚Äî Seguridad b√°sica antes de continuar
Activar firewall
sudo ufw allow OpenSSH
sudo ufw allow 'Nginx Full'
sudo ufw enable

Ver estado:

sudo ufw status

Debe mostrar:

22 ALLOW

80 ALLOW

443 ALLOW

üêò FASE 3 ‚Äî Instalar PostgreSQL + PostGIS (Ubuntu 24.04)

En 24.04 la versi√≥n es PostgreSQL 16 normalmente.

Instalar:

sudo apt install postgresql postgresql-contrib postgis postgresql-16-postgis-3 -y

Verificar:

sudo -u postgres psql

Dentro:

SELECT version();
\q
üóÑÔ∏è Crear base de datos con PostGIS
sudo -u postgres psql

Luego:

CREATE DATABASE empresa_db;
CREATE USER empresa_user WITH PASSWORD 'password_muy_seguro';
GRANT ALL PRIVILEGES ON DATABASE empresa_db TO empresa_user;
\c empresa_db
CREATE EXTENSION postgis;
\q
üõë IMPORTANTE (seguridad BD)

Editar:

sudo nano /etc/postgresql/16/main/postgresql.conf

Buscar:

listen_addresses = 'localhost'

Debe quedar as√≠.
No lo pongas en *.

Reiniciar:

sudo systemctl restart postgresql
üì¶ FASE 4 ‚Äî Preparar entorno Django

Entrar como usuario django:

cd ~
mkdir proyecto
cd proyecto
python3 -m venv venv
source venv/bin/activate

Instalar:

pip install django gunicorn psycopg2-binary

Si usar√°s GIS:

pip install django

(ya est√° incluido soporte GIS en Django)

üõ† Crear proyecto
django-admin startproject config .

Editar config/settings.py:

Cambiar DATABASES:

DATABASES = {
    'default': {
        'ENGINE': 'django.contrib.gis.db.backends.postgis',
        'NAME': 'empresa_db',
        'USER': 'empresa_user',
        'PASSWORD': 'password_muy_seguro',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}

Agregar en INSTALLED_APPS:

'django.contrib.gis',
üß™ Probar conexi√≥n
python manage.py migrate
python manage.py createsuperuser
python manage.py runserver 0.0.0.0:8000

Desde navegador:

http://IP_PUBLICA:8000

‚ö† Si no carga ‚Üí revisamos firewall/router.

üî• Cuando confirmes que esto funciona

En el siguiente mensaje hacemos:

Gunicorn como servicio

Configuraci√≥n profesional Nginx

Dominio

SSL autom√°tico

Backup autom√°tico

Protecci√≥n adicional
